{% extends "base.html" %}

{% block content %}
<div class="columns" id="stats-columns">
    <!-- The stats panel -->
    <div id="stats-panel" class="column bt-panel stats-panel">
        <h2 class="title is-3">Stats</h2>
        <table class="stats">
            <tbody>
                <tr>
                    <th scope="row">User rating</th>
                    <td id="user_rating"></td>
                </tr>
                <tr>
                    <th scope="row">Unique puzzles done</th>
                    <td id="card_count"></td>
                </tr>
                <tr>
                    <th scope="row">Puzzle completions</th>
                    <td id="review_count"></td>
                </tr>
                <tr>
                    <th scope="row">Reviews due</th>
                    <td id="reviews_due_now"></td>
                </tr>
                <tr>
                    <th scope="row">Reviews left today</th>
                    <td id="reviews_due_today"></td>
                </tr>
                <tr>
                    <th scope="row">Next review due</th>
                    <td id="next_review_due"></td>
                </tr>
            </tbody>
        </table>
        <a href="/tactics" class="button">Review</a>
        <a href="/tactics/new" class="button">Next Puzzle</a>
        <div class="bt-loader"></div>
    </div>

    <!-- The review forecast -->
    <div id="review-graph-container" class="column bt-panel chart-panel stats-panel">
        <h2 class="title is-3">Review forecast</h2>
        <div class="chart-container">
            <canvas id="review-graph"></canvas>
        </div>
        <div class="bt-loader"></div>
    </div>

    <!-- Rating over time -->
    <div id="rating-graph-container" class="column bt-panel chart-panel stats-panel">
        <h2 class="title is-3">Rating history</h2>
        <div class="chart-container">
            <canvas id="rating-graph"></canvas>
        </div>
        <div class="bt-loader"></div>
    </div>

    <!-- Review score histogram -->
    <div id="review-score-graph-container" class="column bt-panel chart-panel stats-panel">
        <h2 class="title is-3">Review scores</h2>
        <div class="chart-container">
            <canvas id="review-score-graph"></canvas>
        </div>
        <div class="bt-loader"></div>
    </div>
</div>

<div>
    <p style="margin-top: 1rem; text-align: center;">
        Don't know what's going on? See <a href="/about">About</a>.
    </p>
</div>

<script type="module">
    import {} from '/assets_{{base.assets_version}}/scripts/stats.js';
</script>
{% endblock %}
